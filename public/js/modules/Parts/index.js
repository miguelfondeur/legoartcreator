(() => {
  // ns-hugo:/Users/miguelfondeur/Projects/Lego Art Creator/legoartcreator/assets/js/data/allBrickColors.js
  var allBrickColors = [
    {
      "name": "Dark Brown",
      "family": "brown",
      "rgb": [80, 55, 47],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/dark-brown.jpeg",
      "id": {
        "element": "6322813",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Reddish Brown",
      "family": "brown",
      "rgb": [130, 66, 42],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/reddish-brown.jpeg",
      "id": {
        "element": "6284586",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Sand Yellow",
      "bricklinkName": "Dark Tan",
      "family": "brown",
      "rgb": [184, 152, 105],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/sand-yellow.jpeg",
      "id": {
        "element": "6322841",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Brown",
      "family": "metalic",
      "rgb": [130, 66, 42],
      "alpha": ".5",
      "stroke": [130, 66, 42],
      "price": "0.04",
      "img": "/img/bricks/transparent-brown.jpeg",
      "id": {
        "element": "6274744",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Dark Red",
      "family": "red",
      "rgb": [106, 14, 21],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/dark-red.jpeg",
      "id": {
        "element": "6284585",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Red",
      "bricklinkName": "Red",
      "family": "red",
      "rgb": [201, 26, 9],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-red.jpeg",
      "id": {
        "element": "6284574",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Vibrant Coral",
      "bricklinkName": "Coral",
      "family": "orange",
      "rgb": [255, 129, 114],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/vibrant-coral.jpeg",
      "id": {
        "element": "6311436",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Red",
      "family": "metalic",
      "rgb": [179, 0, 6],
      "alpha": ".5",
      "stroke": [179, 0, 6],
      "price": "0.04",
      "img": "/img/bricks/transparent-red.jpeg",
      "id": {
        "element": "6258607",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Dark Orange",
      "family": "brown",
      "rgb": [179, 84, 8],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/dark-orange.jpeg",
      "id": {
        "element": "6322840",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Orange",
      "bricklinkName": "Orange",
      "family": "brown",
      "rgb": [255, 126, 20],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.04",
      "img": "/img/bricks/bright-orange.jpeg",
      "id": {
        "element": "6284582",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Flame Yellowish Orange",
      "bricklinkName": "Bright Light Orange",
      "family": "yellow",
      "rgb": [255, 199, 0],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/flame-yellowish-orange.jpeg",
      "id": {
        "element": "6322822",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Bright Orange",
      "family": "metalic",
      "rgb": [255, 126, 20],
      "alpha": ".5",
      "stroke": [255, 126, 20],
      "price": "0.03",
      "img": "/img/bricks/transparent-bright-orange.jpeg",
      "id": {
        "element": "6274747",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Yellow",
      "bricklinkName": "Yellow",
      "family": "yellow",
      "rgb": [255, 224, 1],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-yellow.jpeg",
      "id": {
        "element": "6284577",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Cool Yellow",
      "bricklinkName": "Bright Light Yellow",
      "family": "yellow",
      "rgb": [254, 237, 131],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/cool-yellow.jpeg",
      "id": {
        "element": "6343806",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Vibrant Yellow",
      "bricklinkName": "Neon Yellow",
      "family": "yellow",
      "rgb": [255, 252, 0],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/vibrant-yellow.jpeg",
      "id": {
        "element": "6376825",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Yellow",
      "family": "metalic",
      "rgb": [235, 247, 45],
      "alpha": ".5",
      "stroke": [235, 247, 45],
      "price": "0.04",
      "img": "/img/bricks/transparent-yellow.jpeg",
      "id": {
        "element": "6274740",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Olive Green",
      "family": "green",
      "rgb": [171, 169, 83],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/olive-green.jpeg",
      "id": {
        "element": "6284595",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Yellowish Green",
      "family": "green",
      "rgb": [196, 224, 0],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-yellowish-green.jpeg",
      "id": {
        "element": "6284583",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Spring Yellowish Green",
      "bricklinkName": "Yellowish Green",
      "family": "Green",
      "rgb": [231, 242, 167],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/spring-yellowish-green.jpeg",
      "id": {
        "element": "6284598",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Bright Green",
      "family": "metalic",
      "rgb": [16, 203, 49],
      "alpha": ".5",
      "stroke": [16, 203, 49],
      "price": "0.04",
      "img": "/img/bricks/transparent-bright-green.jpeg",
      "id": {
        "element": "6274748",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Earth Green",
      "bricklinkName": "Dark Green",
      "family": "green",
      "rgb": [46, 85, 67],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.04",
      "img": "/img/bricks/earth-green.jpeg",
      "id": {
        "element": "6397157",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Dark Green",
      "family": "green",
      "rgb": [0, 146, 61],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.05",
      "img": "/img/bricks/dark-green.jpeg",
      "id": {
        "element": "6396247",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Green",
      "family": "green",
      "rgb": [16, 203, 49],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-green.jpeg",
      "id": {
        "element": "6353793",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Green",
      "family": "metalic",
      "rgb": [33, 118, 37],
      "alpha": ".5",
      "stroke": [33, 118, 37],
      "price": "0.04",
      "img": "/img/bricks/transparent-green.jpeg",
      "id": {
        "element": "6274742",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Purple",
      "family": "purple",
      "rgb": [239, 91, 179],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-purple.jpeg",
      "id": {
        "element": "6322821",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Light Purple",
      "family": "purple",
      "rgb": [247, 188, 218],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/light-purple.jpeg",
      "id": {
        "element": "6284587",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Light Nougat",
      "family": "brown",
      "rgb": [254, 204, 176],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/light-nougat.jpeg",
      "id": {
        "element": "6315196",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Medium Reddish Violet",
      "family": "metalic",
      "rgb": [206, 29, 155],
      "alpha": ".5",
      "stroke": [206, 29, 155],
      "price": "0.04",
      "img": "/img/bricks/transparent-medium-reddish-violet.jpeg",
      "id": {
        "element": "6274745",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Reddish Violet",
      "family": "purple",
      "rgb": [183, 34, 118],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-reddish-violet.jpeg",
      "id": {
        "element": "6322816",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Medium Lavender",
      "family": "purple",
      "rgb": [198, 137, 217],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.04",
      "img": "/img/bricks/medium-lavender.jpeg",
      "id": {
        "element": "6346374",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Lavender",
      "family": "lilac",
      "rgb": [211, 189, 227],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/lavender.jpeg",
      "id": {
        "element": "6322820",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Bright Violet",
      "family": "metalic",
      "rgb": [85, 37, 183],
      "alpha": ".5",
      "stroke": [85, 37, 183],
      "price": "0.04",
      "img": "/img/bricks/transparent-bright-violet.jpeg",
      "id": {
        "element": "6325432",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Earth Blue",
      "bricklinkName": "Dark Blue",
      "family": "blue",
      "rgb": [36, 55, 87],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/earth-blue.jpeg",
      "id": {
        "element": "6284584",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Blue",
      "bricklinkName": "Blue",
      "family": "blue",
      "rgb": [0, 87, 166],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-blue.jpeg",
      "id": {
        "element": "6284575",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Medium Blue",
      "family": "blue",
      "rgb": [130, 173, 216],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/medium-blue.jpeg",
      "id": {
        "element": "6284602",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Blue",
      "family": "metalic",
      "rgb": [0, 87, 166],
      "alpha": ".5",
      "stroke": [0, 87, 166],
      "price": "0.04",
      "img": "/img/bricks/transparent-blue.jpeg",
      "id": {
        "element": "6273627",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Dark Azur",
      "family": "blue",
      "rgb": [0, 159, 224],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/dark-azur.jpeg",
      "id": {
        "element": "6322824",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Medium Azur",
      "family": "blue",
      "rgb": [106, 206, 224],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/medium-azur.jpeg",
      "id": {
        "element": "6322819",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Light Royal Blue",
      "bricklinkName": "Bright Light Blue",
      "family": "blue",
      "rgb": [188, 209, 237],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/light-royal-blue.jpeg",
      "id": {
        "element": "6322823",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Light Blue",
      "family": "metalic",
      "rgb": [104, 188, 197],
      "alpha": ".5",
      "stroke": [104, 188, 197],
      "price": "0.04",
      "img": "/img/bricks/transparent-light-blue.jpeg",
      "id": {
        "element": "6274739",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Bright Bluish Green",
      "family": "blue",
      "rgb": [0, 162, 159],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/bright-bluish-green.jpeg",
      "id": {
        "element": "6311437",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Aqua",
      "bricklinkName": "Light Aqua",
      "family": "blue",
      "rgb": [207, 239, 234],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/aqua.jpeg",
      "id": {
        "element": "6322818",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "White Glow",
      "family": "white",
      "rgb": [244, 255, 249],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.26",
      "img": "/img/bricks/white-glow.jpeg",
      "id": {
        "element": "6284592",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent Light Blue With Opalescence",
      "family": "metalic",
      "rgb": [104, 188, 197],
      "alpha": ".7",
      "stroke": [104, 188, 197],
      "price": "0.04",
      "img": "/img/bricks/transparent-light-blue-opalescence.jpeg",
      "id": {
        "element": "6299900",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Dark Stone Grey",
      "bricklinkName": "Dark Bluish Gray",
      "family": "gray",
      "rgb": [89, 93, 96],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/dark-stone-grey.jpeg",
      "id": {
        "element": "6284596",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Medium Stone Grey",
      "bricklinkName": "Light Bluish Gray",
      "family": "gray",
      "rgb": [175, 181, 199],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/medium-stone-grey.jpeg",
      "id": {
        "element": "6284071",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "White",
      "family": "white",
      "rgb": [255, 255, 255],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/white.jpeg",
      "id": {
        "element": "6284572",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Transparent",
      "family": "metalic",
      "rgb": [255, 255, 255],
      "alpha": ".1",
      "stroke": [0, 0, 0],
      "price": "0.04",
      "img": "/img/bricks/transparent.jpeg",
      "id": {
        "element": "6274738",
        "design": "35380",
        "bricklink": "98138"
      }
    },
    {
      "name": "Black",
      "family": "black",
      "rgb": [0, 0, 0],
      "alpha": "1",
      "stroke": [255, 255, 255],
      "price": "0.03",
      "img": "/img/bricks/black.jpeg",
      "id": {
        "element": "6284070",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Sand Blue",
      "family": "blue",
      "rgb": [136, 153, 171],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/sand-blue.jpeg",
      "id": {
        "element": "6322842",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    // {
    //     "name": "Flat Silver",    
    //     "family": "gray",
    //     "rgb": [141,148,156],
    //     "alpha": "1",
    //     "stroke": [0,0,0],
    //     "price": "0.03",
    //     "img": "/img/bricks/flat-silver.jpeg",
    //     "id" : {
    //         "element": "4655241",
    //         "design": "35381",       
    //         "bricklink": "98138",
    //     }
    // },
    {
      "name": "Silver Metalic",
      "family": "metalic",
      "rgb": [192, 192, 192],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/silver-metallic.jpeg",
      "id": {
        "element": "6238890",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Warm Gold",
      "family": "yellow",
      "rgb": [231, 158, 29],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/warm-gold.jpeg",
      "id": {
        "element": "6238891",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Medium Nougat",
      "family": "brown",
      "rgb": [227, 160, 91],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/medium-nougat.jpeg",
      "id": {
        "element": "6284589",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Nougat",
      "family": "brown",
      "rgb": [255, 175, 125],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.04",
      "img": "/img/bricks/nougat.jpeg",
      "id": {
        "element": "6343472",
        "design": "35381",
        "bricklink": "98138"
      }
    },
    {
      "name": "Brick Yellow",
      "bricklinkName": "Tan",
      "family": "brown",
      "rgb": [238, 217, 164],
      "alpha": "1",
      "stroke": [0, 0, 0],
      "price": "0.03",
      "img": "/img/bricks/brick-yellow.jpeg",
      "id": {
        "element": "6284573",
        "design": "35381",
        "bricklink": "98138"
      }
    }
  ];

  // <stdin>
  var MosaicParts = class extends HTMLElement {
    render() {
      this.innerHTML = /*html*/
      `
            <div class="flex flex-col flex-grow w-full min-h-full pt-[56px] items-center" >
                <div id="partsWrapper" class="px-4 my-12 w-full max-w-5xl grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div>    
            </div>`;
    }
    constructor() {
      super();
      this.uniqueCircles = [];
      this.brickData = [];
      if (localStorage.getItem("brickData")) {
        this.brickData = JSON.parse(localStorage.getItem("brickData"));
        this.getParts();
      }
    }
    static get observedAttributes() {
      return ["active-page", "full-width", "userid"];
    }
    //Life Cycle Hooks
    attributeChangedCallback(attrName, oldVal, newVal) {
    }
    connectedCallback() {
      this.render();
      this.partsWrapper = this.querySelector("#partsWrapper");
      this.printParts();
    }
    //Methods
    getParts() {
      const colorCounts = {};
      this.brickData.forEach((circle) => {
        const color = `rgb(${circle.fill})`;
        if (colorCounts[color]) {
          colorCounts[color]++;
        } else {
          colorCounts[color] = 1;
        }
      });
      for (const color in colorCounts) {
        if (colorCounts.hasOwnProperty(color)) {
          const count = colorCounts[color];
          const [r, g, b] = color.match(/\d+/g).map(Number);
          const matchingColor = allBrickColors.find((colorObj) => {
            return colorObj.rgb[0] === r && colorObj.rgb[1] === g && colorObj.rgb[2] === b;
          });
          if (matchingColor) {
            const circle = {
              quantity: count,
              name: matchingColor.name,
              family: matchingColor.family,
              price: matchingColor.price,
              img: matchingColor.img,
              id: matchingColor.id
            };
            this.uniqueCircles.push(circle);
          }
        }
      }
    }
    printParts() {
      if (this.partsWrapper) {
        this.partsWrapper.innerHTML = `${this.uniqueCircles.map(
          (part, i) => ` 
                <section class="p-4 bg-white border border-gray-200 w-full flex flex-col">
                    <img class="w-1/2 mx-auto" src=${part.img} >
                    <p class="uppercase">${part.name}</p>
                    <p class="uppercase text-gray-500 text-xs mb-2">${part.id.element}/${part.id.design}</p>
                    <p class="">$${Math.round(parseFloat(part.price) * parseFloat(part.quantity) * 100) / 100}</p>
                    <p class="text-gray-500 uppercase text-xs mb-4">$${part.price} x ${part.quantity}</p>
                    <a href="https://www.lego.com/en-us/pick-and-build/pick-a-brick?query=flat+1x1+round+tile&system=LEGO&category=3#pab-results-wrapper" target="blank" class="bg-sky-600 text-white mt-auto text-sm uppercase text-center rounded w-full p-3 cursor-pointer">Buy on LEGO</a>
                </section>`
        ).join("")}`;
      }
    }
  };
  customElements.define("mosaic-parts", MosaicParts);
})();
