{{ $currentPage := . }}

<div class="sidebar">
    <nav>
        <h3>Documentation</h3>
        <ul>
            {{ range .Site.Menus.main }}
                {{ if .HasChildren }}
                    <li>
                        <a class="{{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active {{end}}" href="{{ .URL }}">
                            <span>{{ .Name }}</span>
                        </a>
                        <!-- Dropdown if exists -->
                        <ul class="subsection">
                            {{ range .Children }}
                                <li>
                                    <a class="{{ if $currentPage.IsMenuCurrent "main" . }} active {{ end }}" href="{{ .URL }}">{{ .Name }}</a>
                                </li>
                            {{ end }}
                        </ul>
                    </li>
                {{else}}
                    <li>
                        <a class="{{ if $currentPage.IsMenuCurrent "main" . }} active {{ end }}" href="{{ .URL }}">
                            {{ .Name }}
                        </a>
                    </li>
                {{end}}
            {{end}}
        </ul>
    </nav>
</div>
